<div class="card">
  <div class="card-header">
    <h1><%= @post.content %></h1>
  </div>
  
  <div class="card-body">
    <p><%= @post.detail %></p>
  </div>
  
  <div class="picture">
    <%= image_tag @post.picture.url if @post.picture? %>
  </div>
  
  
    <div class="picture_details">
      <% @pictures.each do |picture| %>
        <%= image_tag picture.image1.url if picture.image1? %>
        <%= image_tag picture.image2.url if picture.image2? %>
        <%= image_tag picture.image3.url if picture.image3? %>
      <% end %>
    </div>

  
  <%= render 'bookmarks/bookmarks_button', post: @post %>
</div>

<div class="edit-form">
  <% if current_user?(@post.user) %>
    <div class="form-group">
      <%= link_to '詳細画像を追加する', new_picture_detail_path(id: @post.id), class: 'btn btn-success' %>
      <%= link_to '釣果を編集する', edit_post_path(@post), class: 'btn btn-success' %>
    </div>
  
    <div class="form-group">
      <%#= link_to "Delete",post, method: :delete, data: { confirm: "You sure?" }, class: 'btn btn-danger btn-sm' %>
    </div>
  <% end %>
</div>
<div class="comment">
  <div class="col-sm-5">
    <h2>コメント一覧</h2>
    <% @comments.each do |comment| %>
      <div class="card">
        <%= comment.content %>
      </div>
      <% if current_user = comment.user %>
        <%= link_to "削除",post_comment_path(comment.post.id, comment.id), method: :delete, data: { confirm: "You sure?" }, class: 'btn btn-danger btn-sm' %>
      <% end %>
      <div class="text-right">
        <img class="mr-2 rounded" src="<%= gravatar_url(@comment.user, { size: 30 }) %>" alt="">
        <%= link_to @comment.user.name, user_path(@comment.user) %> <span class="text-muted small">投稿日 <%= @post.created_at %></span>
      </div>
    <% end %>
  </div>
</div>

<div class="form-group">
  <div class="col-sm-5">
    <%= form_with(model: [@post, @comment], local: true) do |f| %>
      <%= render 'layouts/error_messages', model: f.object %>
      <div class="form-group">
        <%= f.text_area :content, class: "form-control", rows: 5 %>
      </div>
        <%= f.submit 'コメントをする', class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<h2>釣れた場所</h2>
<%= form_with url: map_request_path, method: :get do |f|%>
  <%= f.text_field :address %>
  <%= f.submit '地図表示' %>
<% end %>



<div id='map'></div>

<style>
#map{
  height: 400px;
  width: 300px;
}
</style>

<script>
  let mapInstance 

  function initMap(){
    mapInstance = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 35.681236, lng: 139.767125},
    zoom: 8
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['API_KEY']%>&callback=initMap" async defer></script>


<div class="col-sm-4">
  <%= link_to "ホームへ戻る", root_url, class: "btn btn-default text-right" %>
</div>
